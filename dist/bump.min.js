/** MIT License
* 
* Copyright (c) 2011 Ludovic CLUBER 
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* http://bumpjs.lcluber.com
*/
var TYPE6={Revision:"0.2.2"};TYPE6.MathUtils={round:function(a,b){return b=Math.pow(10,b),Math.round(a*b)/b},floor:function(a,b){return b=Math.pow(10,b),Math.floor(a*b)/b},ceil:function(a,b){return b=Math.pow(10,b),Math.ceil(a*b)/b},trunc:function(a,b){return b=Math.pow(10,b),Math.trunc(a*b)/b},roundToNearest:function(a,b){return Math.round(a/b)*b},isEven:function(a){return!(1&a)},isOdd:function(a){return 1&a},mix:function(a,b,c){return(1-c)*a+c*b},getSign:function(a){return a?a<0?-1:1:0},getOppositeSign:function(a){return-a},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},normalize:function(a,b,c){return(a-b)/(c-b)},lerp:function(a,b,c){return(c-b)*a+b},map:function(a,b,c,d,e){return this.lerp(this.normalize(a,b,c),d,e)}},TYPE6.Random={"float":function(a,b){return a+Math.random()*(b-a)},integer:function(a,b){return Math.floor(a+Math.random()*(b-a+1))},distribution:function(a,b,c){for(var d=0,e=0;e<c;e++)d+=this["float"](a,b);return d/c},pick:function(a,b){return Math.random()<.5?a:b}},TYPE6.Bezier={quadratic:function(a,b,c,d,e,f,g,h){return g*a+h*b+e*c},cubic:function(a,b,c,d,e,f,g){return Math.pow(g,3)*a+3*Math.pow(g,2)*e*b+3*g*f*c+f*e*d}},TYPE6.Vector2D={x:0,y:0,create:function(a,b){var c=Object.create(this);return c.setX(a),c.setY(b),c},createFromArray:function(a){var b=Object.create(this);return b.setX(a[0]),b.setY(a[1]),b},toArray:function(){return[this.x,this.y]},toString:function(){return"("+this.x+";"+this.y+")"},setX:function(a){return this.x=this.valueValidation(a),this.x},getX:function(){return this.x},setY:function(a){return this.y=this.valueValidation(a),this.y},getY:function(){return this.y},set:function(a,b){return!!this.hasOwnProperty(a)&&(this[a]=this.valueValidation(b),this[a])},get:function(a){return!!this.hasOwnProperty(a)&&this[a]},setXY:function(a,b){this.x=this.valueValidation(a),this.y=this.valueValidation(b)},setToOrigin:function(){this.x=0,this.y=0},setXToOrigin:function(){this.x=0},setYToOrigin:function(){this.y=0},setAngle:function(a){if(this.valueValidation(a)){var b=this.getMagnitude();return this.x=TYPE6.Trigonometry.cosinus(a)*b,this.y=TYPE6.Trigonometry.sinus(a)*b,!0}return!1},getAngle:function(){return Math.atan2(this.y,this.x)},setMagnitude:function(a){if(this.valueValidation(a)){var b=this.getAngle();return this.x=TYPE6.Trigonometry.cosinus(b)*a,this.y=TYPE6.Trigonometry.sinus(b)*a,!0}return!1},getMagnitude:function(){return Math.sqrt(this.getSquaredMagnitude())},getSquaredMagnitude:function(){return this.x*this.x+this.y*this.y},getDistance:function(a){this.subtractFrom(a);var b=this.getMagnitude();return this.addTo(a),b},getSquaredDistance:function(a){this.subtractFrom(a);var b=this.getSquaredMagnitude();return this.addTo(a),b},copy:function(){return this.create(this.getX(),this.getY())},add:function(a){return this.create(this.x+a.getX(),this.y+a.getY())},addX:function(a){return this.create(this.x+a,this.y)},addY:function(a){return this.create(this.x,this.y+a)},addScalar:function(a){return this.create(this.x+a,this.y+a)},addScaledVector:function(a,b){return this.create(this.x+a.getX()*b,this.y+a.getY()*b)},subtract:function(a){return this.create(this.x-a.getX(),this.y-a.getY())},subtractScalar:function(a){return this.create(this.x-a,this.y-a)},subtractScaledVector:function(a,b){return this.create(this.x-a.getX()*b,this.y-a.getY()*b)},scale:function(a){return this.create(this.x*a,this.y*a)},multiply:function(a){return this.create(this.x*a.getX(),this.y*a.getY())},divide:function(a){return this.create(this.x/a.getX(),this.y/a.getY())},halve:function(){return this.create(.5*this.x,.5*this.y)},normalize:function(){var a=this.getMagnitude();if(a)return this.scale(1/a)},absolute:function(){return this.create(Math.abs(this.x),Math.abs(this.y))},opposite:function(){return this.create(-this.x,-this.y)},oppositeX:function(){return this.create(-this.x,this.y)},oppositeY:function(){return this.create(this.x,-this.y)},clamp:function(a){return this.create(TYPE6.MathUtils.clamp(this.x,a.topLeftCorner.getX(),a.bottomRightCorner.getX()),TYPE6.MathUtils.clamp(this.y,a.topLeftCorner.getY(),a.bottomRightCorner.getY()))},lerp:function(a,b,c){return this.create(TYPE6.MathUtils.lerp(a,b.getX(),c.getX()),TYPE6.MathUtils.lerp(a,b.getY(),c.getY()))},quadraticBezier:function(a,b,c,d){var e=d*d,f=1-d,g=Math.pow(f,2),h=2*f*d;return this.create(TYPE6.Bezier.quadratic(a.getX(),b.getX(),c.getX(),d,e,f,g,h),TYPE6.Bezier.quadratic(a.getY(),b.getY(),c.getY(),d,e,f,g,h))},cubicBezier:function(a,b,c,d,e){var f=e*e,g=1-e;return this.create(TYPE6.Bezier.cubic(a.getX(),b.getX(),c.getX(),d.getX(),e,f,g),TYPE6.Bezier.cubic(a.getY(),b.getY(),c.getY(),d.getY(),e,f,g))},quadraticBezierTo:function(a,b,c,d){var e=d*d,f=1-d,g=Math.pow(f,2),h=2*f*d;this.x=TYPE6.Bezier.quadratic(a.getX(),b.getX(),c.getX(),d,e,f,g,h),this.y=TYPE6.Bezier.quadratic(a.getY(),b.getY(),c.getY(),d,e,f,g,h)},cubicBezierTo:function(a,b,c,d,e){var f=e*e,g=1-e;this.x=TYPE6.Bezier.cubic(a.getX(),b.getX(),c.getX(),d.getX(),e,f,g),this.y=TYPE6.Bezier.cubic(a.getY(),b.getY(),c.getY(),d.getY(),e,f,g)},copyTo:function(a){this.x=a.getX(),this.y=a.getY()},addTo:function(a){this.x+=a.getX(),this.y+=a.getY()},addToX:function(a){this.x+=a},addToY:function(a){this.y+=a},addScalarTo:function(a){this.x+=a,this.y+=a},addScaledVectorTo:function(a,b){this.x+=a.getX()*b,this.y+=a.getY()*b},copyScaledVectorTo:function(a,b){this.x=a.getX()*b,this.y=a.getY()*b},subtractFrom:function(a){this.x-=a.getX(),this.y-=a.getY()},copySubtractFromTo:function(a,b){this.x=a.getX()-b.getX(),this.y=a.getY()-b.getY()},subtractScalarFrom:function(a){this.x-=a,this.y-=a},subtractScaledVectorFrom:function(a,b){this.x-=a.getX()*b,this.y-=a.getY()*b},scaleBy:function(a){this.x*=a,this.y*=a},multiplyBy:function(a){this.x*=a.getX(),this.y*=a.getY()},divideBy:function(a){this.x/=a.getX(),this.y/=a.getY()},halveBy:function(){this.x*=.5,this.y*=.5},normalizeTo:function(){var a=this.getMagnitude();a&&this.scaleBy(1/a)},absoluteTo:function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y)},oppositeTo:function(){this.x=-this.x,this.y=-this.y},oppositeXTo:function(){this.x=-this.x},oppositeYTo:function(){this.y=-this.y},clampTo:function(a){this.x=TYPE6.MathUtils.clamp(this.x,a.topLeftCorner.getX(),a.bottomRightCorner.getX()),this.y=TYPE6.MathUtils.clamp(this.y,a.topLeftCorner.getY(),a.bottomRightCorner.getY())},lerpTo:function(a,b,c){this.x=TYPE6.MathUtils.lerp(a,b.getX(),c.getX()),this.y=TYPE6.MathUtils.lerp(a,b.getY(),c.getY())},dotProduct:function(a){return this.x*a.getX()+this.y*a.getY()},isOrigin:function(){return 0===this.x||0===this.y},isPositive:function(){return this.getX()>0&&this.getY()>0},isNegative:function(){return this.getX()<0&&this.getY()<0},isNotOrigin:function(){return!(!this.x&&!this.y)},valueValidation:function(a){return isNaN(a)?0:a}},TYPE6.Geometry={},TYPE6.Geometry.Circle={position:{},radius:0,diameter:0,shape:"circle",size:{},halfSize:{},create:function(a,b,c){var d=Object.create(this);return d.init(),d.setRadius(c),d.initSize(),d.setPositionXY(a,b),d},init:function(){this.position=TYPE6.Vector2D.create(),this.radius=0,this.diameter=0},initSize:function(){this.size=TYPE6.Vector2D.create(this.diameter,this.diameter),this.halfSize=TYPE6.Vector2D.create(this.radius,this.radius)},copy:function(a){return this.create(a.getPositionX(),a.getPositionY(),a.getRadius())},copyTo:function(a){this.setPositionFromVector2D(a.getPosition()),this.setRadius(a.getRadius())},setPositionX:function(a){return this.position.setX(a),this.position.getX()},setPositionY:function(a){return this.position.setY(a),this.position.getY()},setPositionXY:function(a,b){return this.position.setXY(a,b),this.position},setPositionFromVector2D:function(a){return this.position.copyTo(a),this.position},getPosition:function(){return this.position},getPositionX:function(){return this.position.getX()},getPositionY:function(){return this.position.getY()},setRadius:function(a){return this.radius=a,this.diameter=2*this.radius,this.initSize(),this.radius},getRadius:function(){return this.radius},setDiameter:function(a){return this.diameter=a,this.radius=.5*this.diameter,this.initSize(),this.diameter},getDiameter:function(){return this.diameter},getHalfSize:function(){return this.halfSize},clampTo:function(a){this.position.clampTo(a)},scale:function(a){return this.create(this.position.getX(),this.position.getY(),this.radius*a)},scaleBy:function(a){return this.setRadius(this.radius*a),this.radius},getDistance:function(a){return this.position.getDistance(a)},getSquaredDistance:function(a){return this.position.getSquaredDistance(a)}},TYPE6.Geometry.Rectangle={position:{},topLeftCorner:{},bottomRightCorner:{},size:{},halfSize:{},shape:"aabb",create:function(a,b,c,d){var e=Object.create(this);return e.initSize(c,d),e.initPosition(a,b),e},initSize:function(a,b){this.size=TYPE6.Vector2D.create(a,b),this.halfSize=TYPE6.Vector2D.create(.5*a,.5*b)},initPosition:function(a,b){this.position=TYPE6.Vector2D.create(a,b),this.topLeftCorner=TYPE6.Vector2D.create(a-this.halfSize.getX(),b-this.halfSize.getY()),this.bottomRightCorner=TYPE6.Vector2D.create(a+this.halfSize.getX(),b+this.halfSize.getY())},copy:function(a){return this.create(a.getPositionX(),a.getPositionY(),a.getSizeX(),a.getSizeY())},copyTo:function(a){this.setSizeFromVector2D(a.getSize()),this.setPositionFromVector2D(a.getPosition())},setPositionXY:function(a,b){return this.position.setXY(a,b),this.setTopLeftCornerXY(a-this.getHalfSizeX(),b-this.getHalfSizeY()),this.setBottomRightCornerXY(a+this.getHalfSizeX(),b+this.getHalfSizeY()),this.position},setPositionFromVector2D:function(a){return this.position.copyTo(a),this.setTopLeftCornerXY(a.getX()-this.getHalfSizeX(),a.getY()-this.getHalfSizeY()),this.setBottomRightCornerXY(a.getX()+this.getHalfSizeX(),a.getY()+this.getHalfSizeY()),this.position},setTopLeftCornerXY:function(a,b){return this.topLeftCorner.setXY(a,b),this.topLeftCorner},setTopLeftCornerFromVector2D:function(a){return this.topLeftCorner.copyTo(a),this.topLeftCorner},setBottomRightCornerXY:function(a,b){return this.bottomRightCorner.setXY(a,b),this.bottomRightCorner},setBottomRightCornerFromVector2D:function(a){return this.bottomRightCorner.copyTo(a),this.bottomRightCorner},getPosition:function(){return this.position},getPositionX:function(){return this.position.getX()},getPositionY:function(){return this.position.getY()},getTopLeftCorner:function(){return this.topLeftCorner},getTopLeftCornerX:function(){return this.topLeftCorner.getX()},getTopLeftCornerY:function(){return this.topLeftCorner.getY()},getBottomRightCorner:function(){return this.bottomRightCorner},getBottomRightCornerX:function(){return this.bottomRightCorner.getX()},getBottomRightCornerY:function(){return this.bottomRightCorner.getY()},setSizeXY:function(a,b){return this.size.setXY(a,b),this.size},setSizeFromVector2D:function(a){return this.size.copyTo(a),this.size},getSize:function(){return this.size},getSizeX:function(){return this.size.getX()},getSizeY:function(){return this.size.getY()},getHalfSize:function(){return this.halfSize},getHalfSizeX:function(){return this.halfSize.getX()},getHalfSizeY:function(){return this.halfSize.getY()}},TYPE6.Trigonometry={PI:TYPE6.MathUtils.round(Math.PI,2),TWOPI:TYPE6.MathUtils.round(2*Math.PI,2),HALFPI:TYPE6.MathUtils.round(.5*Math.PI,2),sineDecimals:2,cosineDecimals:2,arctanDecimals:2,factorialArray:[],sineLoops:{0:9,1:11,2:13,3:15,4:17,5:18,6:19,7:21,8:23},cosineLoops:{0:6,1:8,2:10,3:12,4:14,5:16,6:18,7:20,8:22},arctanLoops:{0:17,1:19,2:21,3:23,4:25,5:27,6:29,7:31,8:33},setSinePrecision:function(a){return this.sineLoops.hasOwnProperty(property)?(this.sineDecimals=a,a):(this.sineDecimals=2,2)},setCosinePrecision:function(a){return this.cosineLoops.hasOwnProperty(property)?(this.cosineDecimals=a,a):(this.cosineDecimals=2,2)},degreeToRadian:function(a){return a*this.PI/180},radianToDegree:function(a){return 180*a/this.PI},sine:function(a){return a=this.normalizeRadian(a),this.sineDecimals<=2&&a<.28&&a>-.28?a:this.taylorSerie(3,this.sineLoops[this.sineDecimals],a,a,!0)},cosine:function(a){a=this.normalizeRadian(a);var b=a*a;return this.cosineDecimals<=2&&a<=.5&&a>=-.5?1-.5*b:this.taylorSerie(2,this.cosineLoops[this.cosineDecimals],1,a,!0)},arctan2:function(a,b){var c=b/a;return a>0?this.arctan(c):a<0?b<0?this.arctan(c)-this.PI:this.arctan(c)+this.PI:b<0?-this.HALFPI:b>0&&this.HALFPI},arctan2fromVector2D:function(a){return this.arctan2(a.getX(),a.getY())},arctan:function(a){var b=this.arctanLoops[this.arctanDecimals];return a<1&&a>-1?this.taylorSerie(3,b,a,a,!1):a>=1?(a=1/a,-(this.taylorSerie(3,b,a,a,!1)-this.HALFPI)):(a=-1/a,this.taylorSerie(3,b,a,a,!1)-this.HALFPI)},sineEquation:function(a,b,c,d){return a*this.sine(b+c)+d},cosineEquation:function(a,b,c,d){return a*this.cosine(b+c)+d},arctanEquation:function(a,b,c,d){return a*this.arctan(b+c)+d},taylorSerie:function(a,b,c,d,e){for(var f=d*d,g=c,h=0,i=-1,j=0;a<=b;a+=2,j++)c*=f,h=e?this.factorialArray[a]:a,g+=c/h*i,i=TYPE6.MathUtils.getOppositeSign(i);return g},createFactorialArray:function(){for(var a=1,b=1;a<=Math.max(3*this.sineLoops[8],2*this.cosineLoops[8]);a++)b*=this.factorial(a),this.factorialArray.push(b)},factorial:function(a){return a>1?a-1:1},normalizeRadian:function(a){return a>this.PI||a<-this.PI?a-this.TWOPI*Math.floor((a+this.PI)/this.TWOPI):a}},TYPE6.Trigonometry.createFactorialArray();
var BUMP={revision:"0.2.3",options:{space:"2D"}};BUMP.Physics={translate:TYPE6.Vector2D.create(),velocity:TYPE6.Vector2D.create(),initialVelocity:TYPE6.Vector2D.create(),gravity:TYPE6.Vector2D.create(),force:TYPE6.Vector2D.create(),impulse:TYPE6.Vector2D.create(),resultingAcc:TYPE6.Vector2D.create(),damping:.8,mass:1,inverseMass:1,elasticity:-1,collisionSceneId:0,create:function(a,b,c,d,e){var f=Object.create(this);return f.initVectors(a,b),f.mass=c,f.inverseMass=c?1/c:0,f.damping=d,f.elasticity=-e,f},initVectors:function(a){this.velocity=a,this.initialVelocity=this.velocity.copy(),this.translate=TYPE6.Vector2D.create(),this.gravity=TYPE6.Vector2D.create(),this.force=TYPE6.Vector2D.create(),this.impulse=TYPE6.Vector2D.create(),this.resultingAcc=TYPE6.Vector2D.create()},setGravity:function(a,b){this.gravity.setXY(a,b)},setPosition:function(a){return this.translate.setToOrigin(),a>0&&(this.resultingAcc.copyTo(this.gravity),this.inverseMass&&this.impulse.isNotOrigin()&&(this.velocity.addScaledVectorTo(this.impulse,this.inverseMass),this.impulse.setToOrigin()),this.inverseMass&&this.force.isNotOrigin()&&(this.resultingAcc.addScaledVectorTo(this.force,this.inverseMass),this.force.setToOrigin()),this.resultingAcc.isNotOrigin()&&this.velocity.addScaledVectorTo(this.resultingAcc,a),this.velocity.isNotOrigin()&&(this.velocity.scaleBy(Math.pow(this.damping,a)),this.translate.copyScaledVectorTo(this.velocity,a))),this.translate},applyImpulse:function(a){this.velocity.addScaledVectorTo(a,this.inverseMass)},reset:function(){this.velocity.copyTo(this.initialVelocity),this.translate.setToOrigin(),this.force.setToOrigin(),this.impulse.setToOrigin(),this.resultingAcc.setToOrigin()}},BUMP.Collision={delta:TYPE6.Vector2D.create(),delta2:TYPE6.Vector2D.create(),penetration:TYPE6.Vector2D.create(),vertex:TYPE6.Vector2D.create(),relativeVelocity:TYPE6.Vector2D.create(),voronoi:TYPE6.Vector2D.create(),deltaVelocity:0,totalInverseMass:0,impulse:0,impulsePerInverseMass:TYPE6.Vector2D.create(),create:function(){var a=Object.create(this);return a},test:function(a,b,c,d){this.setDelta(a.getPosition(),c.getPosition()),this.getPenetration(a,c)&&(this.separate(a.getPosition(),b.inverseMass,c.getPosition(),d.inverseMass),this.computeImpulseVectors(b,d))},setDelta:function(a,b){this.delta.copySubtractFromTo(a,b)},circleVScircle:function(a){return!!this.circleVScircleHit(a)&&this.circleVScircleProjection(a)},aabbVSaabb:function(a,b){return!!this.aabbVSaabbHit(a,b)&&this.aabbVSaabbProjection()},circleVSaabb:function(a,b,c,d,e){return!!this.aabbVSaabbHit(b,e)&&this.circleVSaabbProjection(a,c,d,e)},getPenetration:function(a,b){if("circle"===a.shape){if("circle"===b.shape)return this.circleVScircle(a.getRadius()+b.getRadius());if("aabb"===b.shape)return this.circleVSaabb(a.getPosition(),a.getHalfSize(),a.getRadius(),b.getPosition(),b.getHalfSize())}else if("aabb"===a.shape){if("circle"===b.shape)return this.circleVSaabb(b.getPosition(),b.getHalfSize(),b.getRadius(),a.getPosition(),a.getHalfSize());if("aabb"===b.shape)return this.aabbVSaabb(a.getHalfSize(),b.getHalfSize())}return!1},aabbVSaabbHit:function(a,b){return this.penetration.copyTo(this.delta),this.penetration.absoluteTo(),this.penetration.oppositeTo(),this.penetration.addTo(a),this.penetration.addTo(b),!!this.penetration.isPositive()},aabbVSaabbProjection:function(){this.penetration.getX()<this.penetration.getY()?this.projectOnX():this.projectOnY()},circleVScircleHit:function(a){var b=this.delta.getSquaredMagnitude(),c=a*a;return c-b>0},circleVScircleProjection:function(a){var b=this.delta.getMagnitude(),c=a-b;return this.penetration.copyScaledVectorTo(this.delta,c/b),!0},setVoronoiRegion:function(a){this.voronoi.setToOrigin();var b=this.delta.getX(),c=this.delta.getY(),d=a.getX(),e=a.getY();b<-d?this.voronoi.setX(-1):b>d&&this.voronoi.setX(1),c<-e?this.voronoi.setY(-1):c>e&&this.voronoi.setY(1)},circleVSaabbProjection:function(a,b,c,d){if(this.setVoronoiRegion(d),0===this.voronoi.getX())return 0===this.voronoi.getY()?(this.penetration.getX()<this.penetration.getY()?this.projectOnX():this.projectOnY(),!0):this.projectOnY();if(0===this.voronoi.getY())return this.projectOnX();this.vertex.copyTo(this.voronoi),this.vertex.multiplyBy(d),this.vertex.addTo(c),this.delta2.copySubtractFromTo(a,this.vertex);var e=this.delta2.getSquaredMagnitude(),f=b*b-e;return f>0&&(e=this.delta2.getMagnitude(),f=b-e,0===e?this.penetration.copyScaledVectorTo(this.voronoi,f/1.41):this.penetration.copyScaledVectorTo(this.delta2,f/e),!0)},projectOnX:function(){return this.penetration.setYToOrigin(),this.delta.getX()<0&&(this.penetration.oppositeXTo(),!0)},projectOnY:function(){return this.penetration.setXToOrigin(),this.delta.getY()<0&&(this.penetration.oppositeYTo(),!0)},separate:function(a,b,c,d){this.totalInverseMass=b+d,b&&a.addScaledVectorTo(this.penetration,b/this.totalInverseMass),d&&c.subtractScaledVectorFrom(this.penetration,d/this.totalInverseMass)},computeImpulseVectors:function(a,b){var c=this.separatingVel(a.velocity,b.velocity);c<0&&(this.deltaVelocity=c*a.elasticity-c,this.impulse=this.deltaVelocity/this.totalInverseMass,this.impulsePerInverseMass.copyScaledVectorTo(this.penetration,this.impulse),a.impulse.copyTo(this.impulsePerInverseMass),this.impulsePerInverseMass.oppositeTo(),b.impulse.copyTo(this.impulsePerInverseMass))},separatingVel:function(a,b){return this.penetration.normalizeTo(),this.relativeVelocity.copySubtractFromTo(a,b),this.relativeVelocity.dotProduct(this.penetration)}},BUMP.Scene={bodies:[],bodiesLength:0,collision:BUMP.Collision.create(),gravity:TYPE6.Vector2D.create(0,400),create:function(){var a=Object.create(this);return a},addBody:function(a){return!a.physics.collisionSceneId&&(this.bodiesLength++,a.physics.collisionSceneId=this.bodiesLength,this.bodies.push(a),!0)},removeBody:function(){},test:function(){for(var a=0;a<this.bodiesLength;a++)for(var b=a+1;b<this.bodiesLength;b++){var c=this.bodies[a],d=this.bodies[b];this.collision.test(c.body,c.physics,d.body,d.physics)}},setGravity:function(){},getGravity:function(){return this.gravity}};